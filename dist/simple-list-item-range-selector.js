!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SimpleListItemRangeSelector=t():e.SimpleListItemRangeSelector=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=[],i={CTRL_CLICK_TO_SELECT:0,CLICK_TO_SELECT:1},c={createInstance:function(e){function t(e){var t=e.clickMode,n=e.containerNode,o=e.childSelector,i=e.resetSelector,a=e.selectedClassName,s=e.onSelectionChanged,d=e.rangeSelectionEnabled,l=void 0===d||d,u=e.debug;if(!n)throw Error("You need to specify a valid containerNode");if(O=n,o?k=o:(k="li",console.warn('No childSelector was specified. Defaulted to "li"')),!(I=n.querySelectorAll(k)))throw Error("Items were not found using "+k+" selector.");C(),g(t)?x=t:(x=c.clickModes.CTRL_CLICK_TO_SELECT,console.warn('Invalid clickMode was specified. Defaulted to "CTRL_CLICK_TO_SELECT"')),s&&"function"==typeof s&&(M=s),K=a,R=i,N=u,r({resetEvent:i,rangeEvent:l})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetEvent,r=void 0!==t&&t,o=e.rangeEvent,i=void 0===o||o;if(r&&R){document.querySelector(R).addEventListener("click",m)}i&&(T=!0,O.addEventListener("selectstart",function(e){return h})),[].concat(n(I)).forEach(function(e,t){e.setAttribute("data-slirs-index",t.toString()),e.addEventListener("click",p)})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resetEvent,r=void 0!==t&&t,o=e.rangeEvent,i=void 0===o||o,c=e.clickEvent,a=void 0===c||c;if(r&&R){document.querySelector(R).removeEventListener("click",m)}i&&(T=!1,O.removeEventListener("selectstart",h)),a&&[].concat(n(I)).forEach(function(e){e.removeEventListener("click",p)})}function s(e){var t=[],r=e.concat().sort(),n=!0,o=!1,i=void 0;try{for(var c,a=I[Symbol.iterator]();!(n=(c=a.next()).done);n=!0){var s=c.value,d=E(s);r.includes(d)?(t.push(s),v(s)||(s.setAttribute("data-slirs-selected","1"),K&&s.classList.add(K))):v(s)&&(s.removeAttribute("data-slirs-selected"),K&&s.classList.remove(K))}}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}M(t)}function d(e,t){var r=this,n=E(r);if(e.shiftKey&&T){var o=document.querySelector(k+'[data-slirs-selected="1"]'),c=E(o);N&&console.log("first selected item: ",c," current selected item: ",n," last selected item without shift: ",_),c===n?f({start:n+1,end:I.length,mode:"forward"}):c<n?n>_?(l({start:_+1,end:n}),f({start:n+1,end:I.length,mode:"forward"}),f({start:_-1,end:0,mode:"reverse"})):(l({start:n,end:_-1}),f({start:n-1,end:0,mode:"reverse"}),f({start:_+1,end:I.length,mode:"forward"})):(l({start:n,end:_}),f({start:_+1,end:I.length,mode:"forward"}))}else _=n,v(r)?x!==i.CTRL_CLICK_TO_SELECT||e.ctrlKey?A.splice(A.indexOf(n),1):(A=[],A.push(n)):(x!==i.CTRL_CLICK_TO_SELECT||e.ctrlKey||(A=[]),A.push(n));t(A)}function l(e){var t=e.start,r=e.end;if(!(t<0||r<t))for(var n=t;n<=r;n++){var o=I[n];if(o&&!v(o)){var i=E(o);A.push(i)}}}function u(e){var t=I[e];t&&v(t)&&A.splice(A.indexOf(e),1)}function f(e){var t=e.start,r=e.end,n=e.mode;if(!(t<0))if("reverse"===n&&r<=t)for(var o=t;o>=r;o--)u(o);else if("forward"===n&&r>t)for(var i=t;i<=r;i++)u(i)}function v(e){return e.hasAttribute("data-slirs-selected","1")}function m(){A=[],s(A)}function h(e){return e.preventDefault(),!1}function p(e){d.call(this,e,s)}function E(e){try{return parseInt(e.getAttribute("data-slirs-index"))}catch(e){throw Error("Index doesn't exist. Something went dreadfully wrong.")}}function g(e){var t=!1;if(void 0===e||""===e)return!1;for(var r in i)e===i[r]&&(t=!0);return t}function y(e){if(e&&!v(e)){var t=E(e);A.push(t)}s(A)}function S(e){if(e){u(E(e))}s(A)}function L(){a({rangeEvent:!0,clickEvent:!1})}function C(){var e=!0,t=!1,r=void 0;try{for(var n,o=I[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.removeAttribute("data-slirs-index"),i.removeAttribute("data-slirs-selected"),K&&i.classList.remove(K)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}function b(){t({clickMode:x,containerNode:O,childSelector:k,resetSelector:R,selectedClassName:K,onSelectionChanged:M,rangeSelectionEnabled:T,debug:N})}function w(e){N&&console.log("Going to do update for new items"),(O=e)&&(I=O.querySelectorAll(k),[].concat(n(I)).forEach(function(e,t){e.setAttribute("data-slirs-index",t.toString()),e.addEventListener("click",p)}))}var x=void 0,I=[],_=void 0,T=!0,A=[],O=void 0,k=void 0,K=void 0,R=void 0,M=function(){},N=!1,j={id:e,init:t,selectItem:y,unselectItem:S,disableRangeSelection:L,reset:b,unregisterEvents:a,updateForNewItems:w};return o.push(j),j},getInstance:function(e){return o.find(function(t){return t.id===e})},removeInstance:function(e){var t=this.getInstance(e);if(!t)throw Error("Instance cannot be found at Id"+e);t.unregisterEvents(),t._resetDOM();var r=o.indexOf(t);o.splice(r,1)},clickModes:i};e.exports=c},function(e,t,r){e.exports=r(0)}])});