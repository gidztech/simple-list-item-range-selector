!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SimpleListItemRangeSelector=t():e.SimpleListItemRangeSelector=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=[],i={CTRL_CLICK_TO_SELECT:0,CLICK_TO_SELECT:1},c={createInstance:function(e){function t(e){var t=e.clickMode,n=e.containerNode,o=e.childSelector,i=e.resetSelector,s=e.selectedClassName,a=e.onSelectionChanged,d=e.debug;if(!n)throw Error("You need to specify a valid containerNode");if(T=n,o?A=o:(A="li",console.warn('No childSelector was specified. Defaulted to "li"')),!(I=n.querySelectorAll(A)))throw Error("Items were not found using "+A+" selector.");C(),L(t)?x=t:(x=c.clickModes.CTRL_CLICK_TO_SELECT,console.warn('Invalid clickMode was specified. Defaulted to "CTRL_CLICK_TO_SELECT"')),a&&"function"==typeof a&&(K=a),O=s,k=i,N=d,r()}function r(){if(k){document.querySelector(k).addEventListener("click",m)}T.addEventListener("selectstart",function(e){return p}),[].concat(n(I)).forEach(function(e,t){e.setAttribute("data-slirs-index",t.toString()),e.addEventListener("click",h)})}function s(){if(k){document.querySelector(k).removeEventListener("click",m)}T.removeEventListener("selectstart",p);[].concat(n(I)).forEach(function(e,t){e.removeEventListener("click",h)})}function a(e){var t=[],r=e.concat().sort(),n=!0,o=!1,i=void 0;try{for(var c,s=I[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var a=c.value,d=y(a);r.includes(d)?(t.push(a),v(a)||(a.setAttribute("data-slirs-selected","1"),O&&a.classList.add(O))):v(a)&&(a.removeAttribute("data-slirs-selected"),O&&a.classList.remove(O))}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}K(t)}function d(e,t){var r=this,n=y(r);if(e.shiftKey){var o=document.querySelector(A+'[data-slirs-selected="1"]'),c=y(o);N&&console.log("first selected item: ",c," current selected item: ",n," last selected item without shift: ",b),c===n?f({start:n+1,end:I.length,mode:"forward"}):c<n?n>b?(l({start:b+1,end:n}),f({start:n+1,end:I.length,mode:"forward"}),f({start:b-1,end:0,mode:"reverse"})):(l({start:n,end:b-1}),f({start:n-1,end:0,mode:"reverse"}),f({start:b+1,end:I.length,mode:"forward"})):(l({start:n,end:b}),f({start:b+1,end:I.length,mode:"forward"}))}else b=n,v(r)?x!==i.CTRL_CLICK_TO_SELECT||e.ctrlKey?_.splice(_.indexOf(n),1):(_=[],_.push(n)):(x!==i.CTRL_CLICK_TO_SELECT||e.ctrlKey||(_=[]),_.push(n));t(_)}function l(e){var t=e.start,r=e.end;if(!(t<0||r<t))for(var n=t;n<=r;n++){var o=I[n];if(o&&!v(o)){var i=y(o);_.push(i)}}}function u(e){var t=I[e];t&&v(t)&&_.splice(_.indexOf(e),1)}function f(e){var t=e.start,r=e.end,n=e.mode;if(!(t<0))if("reverse"===n&&r<=t)for(var o=t;o>=r;o--)u(o);else if("forward"===n&&r>t)for(var i=t;i<=r;i++)u(i)}function v(e){return e.hasAttribute("data-slirs-selected","1")}function m(){_=[],a(_)}function p(e){return e.preventDefault(),!1}function h(e){d.call(this,e,a)}function y(e){try{return parseInt(e.getAttribute("data-slirs-index"))}catch(e){throw Error("Index doesn't exist. Something went dreadfully wrong.")}}function L(e){var t=!1;if(void 0===e||""===e)return!1;for(var r in i)e===i[r]&&(t=!0);return t}function E(e){if(e&&!v(e)){var t=y(e);_.push(t)}a(_)}function g(e){if(e){u(y(e))}a(_)}function C(){var e=!0,t=!1,r=void 0;try{for(var n,o=I[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.removeAttribute("data-slirs-index"),i.removeAttribute("data-slirs-selected"),O&&i.classList.remove(O)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}function S(){t({clickMode:x,containerNode:T,itemsSelector:A,resetSelector:k,selectedClassName:O,onSelectionChanged:K,debug:N})}function w(e){N&&console.log("Going to do update for new items"),(T=e)&&(I=T.querySelectorAll(A),[].concat(n(I)).forEach(function(e,t){e.setAttribute("data-slirs-index",t.toString()),e.addEventListener("click",h)}))}var x=void 0,I=[],b=void 0,_=[],T=void 0,A=void 0,O=void 0,k=void 0,K=function(){},N=!1,R={id:e,init:t,selectItem:E,unselectItem:g,reset:S,unregisterEvents:s,updateForNewItems:w};return o.push(R),R},getInstance:function(e){return o.find(function(t){return t.id===e})},removeInstance:function(e){var t=this.getInstance(e);if(!t)throw Error("Instance cannot be found at Id"+e);t.unregisterEvents();var r=o.indexOf(t);o.splice(r,1)},clickModes:i};e.exports=c},function(e,t,r){e.exports=r(0)}])});